{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Carpetas y Documentos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{% static 'css/carpeta1.css' %}?v={{ timestamp }}">
</head>

<body>


  <!-- Header superior -->
<div
  class="fixed top-0 left-0 w-full h-[100px] bg-[#4A4A4A] text-white z-[1001]">
  <div class="flex items-center justify-between w-[90%] h-full mx-auto">
    <!-- Logo -->
    <img src="{% static 'diseños/imagenes/logo.png' %}" alt="logo"
      class="h-full w-auto flex-shrink-0" />
      <!-- Texto centrado ahora -->
    <h4 class="m-0 text-[35px] font-bold text-center flex-1">
      Maderas <span class="text-[#ff9800]">Isabella</span>
    </h4> 
    <!-- User menu -->
    <div class="group relative inline-flex items-center flex-shrink-0 cursor-pointer">
    <div class="w-12 h-12 rounded-full border-2 border-[#ff9800] shadow-md"
        style=" background-image: url('{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'diseños/imagenes/default-profile.png' %}{% endif %}');
          background-size: cover; background-position: center; "> </div>      <span class="user-name ml-3 text-white font-medium"> {{ user.nombres }} {{ user.apellidos }}</span>
      <div class="hidden group-hover:block absolute right-0 top-full mt-2 bg-white min-w-[200px] shadow-lg rounded divide-y divide-gray-200 z-50">
        <a href="{% url 'profile' %}" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Perfil</a>
        <a href="#" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Calificaciones</a>
        <a href="#" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Calendario</a>
        <a href="#" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Archivos privados</a>
        <a href="#" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Informes</a>
        <a href="#" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Preferencias</a>
        <a href="{% url 'logout' %}" class="block px-4 py-3 text-[#4A4A4A] text-sm hover:bg-gray-100">Cerrar sesión</a>
      </div>
    </div>
  </div>
</div>



  <div class="main-content">
    <!-- Menú vertical (Sidebar) -->
    <div class="sidebar">
      <h2> Menú</h2>
      <div class="menu">
        <!-- enlaces del sidebar -->
        <a href="{% url 'index' %}"class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Inicio</a>
        <a href="{% url 'gestionar_productos' %}" class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Galería de Publicidad</a>
        <a href="{% url 'inventory_list' %}" class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Lista de inventario</a>
        <a href="{% url 'lista_login' %}" class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Listado de Cuentas</a>
        <a href="{% url 'carpeta' %}" class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Documentos de contratación</a>
        <a href="{% url 'manage_backups' %}" class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Gestión de BD (backups)</a>
        <a href="{% url 'logout' %}" class=" block p-[12px] mb-[10px] text-[#DBC5AD] no-underline rounded-[4px] transition-colors duration-300 ease hover:bg-[#45a049] hover:text-white">Cerrar Sesión</a>
      </div>
    </div>

    <div class="container">
      <!-- Título principal -->
      <h1>Gestión de Carpetas y Documentos</h1>

      <!-- Botones superiores: ahora sólo "Crear Nuevo Trabajador" y Volver -->
      <div class="form-group top-buttons">
        <button id="openNewFolderModalBtn" class="btn">Crear Nuevo Trabajador</button>
        <a href="{% url 'index' %}" class="btn">Volver al Inicio</a>
        <div class="form-group download-buttons">
          <button id="downloadPdfBtn" class="btn" disabled>Descargar Prestaciones en PDF</button>
          <button id="downloadExcelBtn" class="btn" disabled>Descargar Prestaciones en Excel</button>
        </div>
      </div>

      <!-- Barra de búsqueda de carpetas -->
      <div class="form-group">
        <input type="text" id="searchInput" placeholder="Buscar carpeta...">
      </div>

      <!-- Contenedor donde se mostrarán las carpetas creadas -->
      <div id="foldersContainer"></div>
    </div>

    <!-- Modal para crear carpeta (input + botón) -->
    <div id="modal-nueva-carpeta" style="display:none;" class="hidden">
      <div id="modal-content-nueva-carpeta">
        <h2>Crear Carpeta</h2>
        <span class="close-btn" onclick="closeNewFolderModal()">&times;</span>
        <div class="form-group">
          <input type="text" id="folderName" placeholder="Nombre de la carpeta">
          {% csrf_token %}
          <button id="createFolderBtn" class="btn">Crear Carpeta</button>
        </div>
      </div>
    </div>

    <!-- Modal para editar prestaciones -->
    <div id="modal-editar" style="display:none;">
      <div id="modal-content-editar">
        <h2>Editar Prestaciones de Servicio</h2>
        <div id="benefitsForm" class="barra">
          <!-- .-.. campos existentes ... -->
          <div>
            <label>Fecha de inicio:</label>
            <input type="text" id="fecha_inicio" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Puesto designado:</label>
            <input type="text" id="puesto_designado" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Salario actual:</label>
            <input type="text" id="salario_actual" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Horas de trabajo:</label>
            <input type="text" id="horas_trabajo" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Tiempo de contrato:</label>
            <input type="text" id="tiempo_contrato" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Número de identidad:</label>
            <input type="text" id="numero_identidad" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Número de seguro social:</label>
            <input type="text" id="numero_seguro_social" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>EPS:</label>
            <input type="text" id="eps" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Fondo de pensiones (AFP):</label>
            <input type="text" id="fondo_pensiones" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>ARL:</label>
            <input type="text" id="arl" placeholder="Ingrese el dato">
          </div>
        </div>
        <div style="text-align: right; margin-top: 10px;">
          <button id="saveBenefitsBtn" class="btn">Guardar Prestaciones</button>
          <button id="closeModalBtn" class="btn" onclick="closeModaleditar()">Cerrar</button>
        </div>
      </div>
    </div>

    <!-- Modal para mostrar prestaciones guardadas -->
    <div id="modal-mostrar" style="display:none;">
      <div id="modal-content-mostrar">
        <h2>Prestaciones de Servicio</h2>
        <div id="benefitsDisplayContent"></div>
        <div style="text-align: right; margin-top: 10px;">
          <button id="closeShowBenefitsBtn" class="btn" onclick="closeModalmostrar()">Cerrar</button>
        </div>
      </div>
    </div>

    <!-- Modal para ver el archivo (PDF, imagen, etc.) -->
    <div id="modal-ver" style="display:none;">
      <div id="modal-content-ver" style="width:80%; height:80%;">
        <h2>Vista del Archivo</h2>
        <div style="width:100%; height: calc(100% - 50px);">
          <iframe id="fileIframe" src="" style="width:100%; height:100%; border: none;"></iframe>
        </div>
        <div style="text-align: right; margin-top: 10px;">
          <button id="closeFileModalBtn" class="btn" style="background: #6c757d;">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Abrir modal de nueva carpeta
    document.getElementById('openNewFolderModalBtn').addEventListener('click', openNewFolderModal);
    function openNewFolderModal() {
      document.getElementById('modal-nueva-carpeta').style.display = 'block';
    }
    // Cerrar modal de nueva carpeta
    function closeNewFolderModal() {
      document.getElementById('modal-nueva-carpeta').style.display = 'none';
    }
    function closeModaleditar() {
      document.getElementById('modal-editar').style.display = 'none';
    }
    function closeModalmostrar() {
      document.getElementById('modal-mostrar').style.display = 'none';
    }
  </script>
  <script src="{% static 'js/carpeta.js' %}"></script>
</body>
</html>
