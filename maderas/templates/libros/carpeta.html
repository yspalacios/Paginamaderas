{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Carpetas y Documentos</title>
  <link rel="stylesheet" href="{% static 'css/carpeta1.css' %}?v={{ timestamp }}">
</head>

<body>
    <!-- Header -->
  <div class="headermenu">
    <div class="hmenu">
      <img src="{% static 'diseños/imagenes/logo.png' %}" alt="logo" class="img">
      <h4>Maderas <span>Isabella</span></h4>
    </div>
  </div>
    
    <!-- Menú circular desplegable -->
    <div class="user-menu">
      <div class="user-circle" style="background-image: url('{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static "diseños/imagenes/default-profile.png" %}{% endif %}'); background-size: cover; background-position: center;"></div>
      <div class="dropdown-content">
        <a href="{% url 'profile' %}">Perfil</a>
        <a href="#">Calificaciones</a>
        <a href="#">Calendario</a>
        <a href="#">Archivos privados</a>
        <a href="#">Informes</a>
        <a href="#">Preferencias</a>
        <a href="{% url 'logout' %}">Cerrar sesión</a>
      </div>
    </div>
  </div>


  <div class="main-content">
    <!-- Menú vertical (Sidebar) -->
    <div class="sidebar">
      <h2> Menú</h2>
      <div class="menu">
        <a href="{% url 'index' %}">Inicio</a>
        <a href="{% url 'gestionar_productos' %}">Galería de Publicidad</a>
        <a href="{% url 'lista_login' %}">Listado de Cuentas</a>
        <a href="{% url 'carpeta' %}">Documentos de contratación</a>
        <a href="{% url 'manage_backups' %}">Gestion de BD (backups)</a>
        <a href="{% url 'logout' %}">Cerrar Sesión</a>
      </div>
    </div>

    <div class="container">
      <!-- Título principal -->
      <h1>Gestión de Carpetas y Documentos</h1>

      <!-- Botones superiores: ahora sólo "Crear Nuevo Trabajador" y Volver -->
      <div class="form-group top-buttons">
        <button id="openNewFolderModalBtn" class="btn">Crear Nuevo Trabajador</button>
        <a href="{% url 'index' %}" class="btn">Volver al Inicio</a>
        <div class="form-group download-buttons">
          <button id="downloadPdfBtn" class="btn" disabled>Descargar Prestaciones en PDF</button>
          <button id="downloadExcelBtn" class="btn" disabled>Descargar Prestaciones en Excel</button>
        </div>
      </div>

      <!-- Barra de búsqueda de carpetas -->
      <div class="form-group">
        <input type="text" id="searchInput" placeholder="Buscar carpeta...">
      </div>

      <!-- Contenedor donde se mostrarán las carpetas creadas -->
      <div id="foldersContainer"></div>
    </div>

    <!-- Modal para crear carpeta (input + botón) -->
    <div id="modal-nueva-carpeta" style="display:none;" class="hidden">
      <div id="modal-content-nueva-carpeta">
        <h2>Crear Carpeta</h2>
        <span class="close-btn" onclick="closeNewFolderModal()">&times;</span>
        <div class="form-group">
          <input type="text" id="folderName" placeholder="Nombre de la carpeta">
          {% csrf_token %}
          <button id="createFolderBtn" class="btn">Crear Carpeta</button>
        </div>
      </div>
    </div>

    <!-- Modal para editar prestaciones -->
    <div id="modal-editar" style="display:none;">
      <div id="modal-content-editar">
        <h2>Editar Prestaciones de Servicio</h2>
        <div id="benefitsForm" class="barra">
          <!-- .-.. campos existentes ... -->
          <div>
            <label>Fecha de inicio:</label>
            <input type="text" id="fecha_inicio" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Puesto designado:</label>
            <input type="text" id="puesto_designado" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Salario actual:</label>
            <input type="text" id="salario_actual" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Horas de trabajo:</label>
            <input type="text" id="horas_trabajo" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Tiempo de contrato:</label>
            <input type="text" id="tiempo_contrato" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Número de identidad:</label>
            <input type="text" id="numero_identidad" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Número de seguro social:</label>
            <input type="text" id="numero_seguro_social" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>EPS:</label>
            <input type="text" id="eps" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>Fondo de pensiones (AFP):</label>
            <input type="text" id="fondo_pensiones" placeholder="Ingrese el dato">
          </div>
          <div>
            <label>ARL:</label>
            <input type="text" id="arl" placeholder="Ingrese el dato">
          </div>
        </div>
        <div style="text-align: right; margin-top: 10px;">
          <button id="saveBenefitsBtn" class="btn">Guardar Prestaciones</button>
          <button id="closeModalBtn" class="btn" onclick="closeModaleditar()">Cerrar</button>
        </div>
      </div>
    </div>

    <!-- Modal para mostrar prestaciones guardadas -->
    <div id="modal-mostrar" style="display:none;">
      <div id="modal-content-mostrar">
        <h2>Prestaciones de Servicio</h2>
        <div id="benefitsDisplayContent"></div>
        <div style="text-align: right; margin-top: 10px;">
          <button id="closeShowBenefitsBtn" class="btn" onclick="closeModalmostrar()">Cerrar</button>
        </div>
      </div>
    </div>

    <!-- Modal para ver el archivo (PDF, imagen, etc.) -->
    <div id="modal-ver" style="display:none;">
      <div id="modal-content-ver" style="width:80%; height:80%;">
        <h2>Vista del Archivo</h2>
        <div style="width:100%; height: calc(100% - 50px);">
          <iframe id="fileIframe" src="" style="width:100%; height:100%; border: none;"></iframe>
        </div>
        <div style="text-align: right; margin-top: 10px;">
          <button id="closeFileModalBtn" class="btn" style="background: #6c757d;">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Abrir modal de nueva carpeta
    document.getElementById('openNewFolderModalBtn').addEventListener('click', openNewFolderModal);
    function openNewFolderModal() {
      document.getElementById('modal-nueva-carpeta').style.display = 'block';
    }
    // Cerrar modal de nueva carpeta
    function closeNewFolderModal() {
      document.getElementById('modal-nueva-carpeta').style.display = 'none';
    }
    function closeModaleditar() {
      document.getElementById('modal-editar').style.display = 'none';
    }
    function closeModalmostrar() {
      document.getElementById('modal-mostrar').style.display = 'none';
    }
  </script>
  <script src="{% static 'js/carpeta.js' %}"></script>
</body>
</html>
